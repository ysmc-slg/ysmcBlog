<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><meta name="theme-color" content="#ffffff"><meta name="google-site-verification" content=""><title>GeoHash | 余生慢尝</title><meta name="description" content="geoHash">
    <link rel="modulepreload" href="/assets/app.0db19ca3.js"><link rel="modulepreload" href="/assets/geoHash.html.14247ee5.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.5a098b48.js"><link rel="modulepreload" href="/assets/geoHash.html.b9c1878f.js">
    <link rel="stylesheet" href="/assets/style.bde21de7.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container" data-v-3a25be96><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">余生慢尝</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/database/redis/" class="nav-link router-link-active" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/database/mysql/" class="nav-link" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/database/mysql/senior/" class="nav-link" aria-label="高级部分"><!--[--><!--]--> 高级部分 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="java系"><span class="title">java系</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="java系"><span class="title">java系</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/java/basics/" class="nav-link" aria-label="java基础"><!--[--><!--]--> java基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/jdk8/" class="nav-link" aria-label="Java8新特性"><!--[--><!--]--> Java8新特性 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/reflection/" class="nav-link" aria-label="java反射"><!--[--><!--]--> java反射 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="MQ"><span class="title">MQ</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="MQ"><span class="title">MQ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/mq/rabbitmq/" class="nav-link" aria-label="rabbitMQ"><!--[--><!--]--> rabbitMQ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/solution/dyanmicDataSource/" class="nav-link" aria-label="自定义动态数据源"><!--[--><!--]--> 自定义动态数据源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/solution/log/" class="nav-link" aria-label="自定义日志注解"><!--[--><!--]--> 自定义日志注解 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/solution/asyncManager/" class="nav-link" aria-label="异步管理器"><!--[--><!--]--> 异步管理器 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/solution/excelAndUpload/" class="nav-link" aria-label="导入多出和上传下载"><!--[--><!--]--> 导入多出和上传下载 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="SSM"><span class="title">SSM</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="SSM"><span class="title">SSM</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ssm/spring/" class="nav-link" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssm/springmvc/" class="nav-link" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssm/mybatis/" class="nav-link" aria-label="Mybatis"><!--[--><!--]--> Mybatis <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssm/integration/" class="nav-link" aria-label="SSM整合"><!--[--><!--]--> SSM整合 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>高级部分</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/ssm/ssm-senior/spring/" class="nav-link" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/ssm/ssm-senior/springmvc/" class="nav-link" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/springboot/" class="nav-link" aria-label="SpringBoot"><!--[--><!--]--> SpringBoot <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/springsecurity2/" class="nav-link" aria-label="SpringSecirity"><!--[--><!--]--> SpringSecirity <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/Front-end/es6/" class="nav-link" aria-label="ES6新特性"><!--[--><!--]--> ES6新特性 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/Front-end/vue/" class="nav-link" aria-label="VueJS"><!--[--><!--]--> VueJS <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="常用文档"><span class="title">常用文档</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="常用文档"><span class="title">常用文档</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://element.eleme.cn/#/zh-CN/component/table" rel="noopener noreferrer" target="_blank" aria-label="elementUI"><!--[--><!--]--> elementUI <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://cn.vuejs.org/v2/guide/" rel="noopener noreferrer" target="_blank" aria-label="Vue文档"><!--[--><!--]--> Vue文档 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="http://momentjs.cn/docs/" rel="noopener noreferrer" target="_blank" aria-label="momentjs"><!--[--><!--]--> momentjs <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="http://easypoi.mydoc.io/" rel="noopener noreferrer" target="_blank" aria-label="EasyPoi文档"><!--[--><!--]--> EasyPoi文档 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发工具类"><span class="title">开发工具类</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发工具类"><span class="title">开发工具类</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/utils/stringutils/" class="nav-link" aria-label="StringUtils"><!--[--><!--]--> StringUtils <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--[--><a class="icon-button" href="https://github.com/ysmc-slg/ysmcBlog" target="_blank" aria-label="View GitHub Repo" data-v-3a25be96><!----></a><!--]--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/database/redis/" class="nav-link router-link-active" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/database/mysql/" class="nav-link" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/database/mysql/senior/" class="nav-link" aria-label="高级部分"><!--[--><!--]--> 高级部分 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="java系"><span class="title">java系</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="java系"><span class="title">java系</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/java/basics/" class="nav-link" aria-label="java基础"><!--[--><!--]--> java基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/jdk8/" class="nav-link" aria-label="Java8新特性"><!--[--><!--]--> Java8新特性 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/reflection/" class="nav-link" aria-label="java反射"><!--[--><!--]--> java反射 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="MQ"><span class="title">MQ</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="MQ"><span class="title">MQ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/mq/rabbitmq/" class="nav-link" aria-label="rabbitMQ"><!--[--><!--]--> rabbitMQ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/solution/dyanmicDataSource/" class="nav-link" aria-label="自定义动态数据源"><!--[--><!--]--> 自定义动态数据源 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/solution/log/" class="nav-link" aria-label="自定义日志注解"><!--[--><!--]--> 自定义日志注解 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/solution/asyncManager/" class="nav-link" aria-label="异步管理器"><!--[--><!--]--> 异步管理器 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/solution/excelAndUpload/" class="nav-link" aria-label="导入多出和上传下载"><!--[--><!--]--> 导入多出和上传下载 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="SSM"><span class="title">SSM</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="SSM"><span class="title">SSM</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ssm/spring/" class="nav-link" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssm/springmvc/" class="nav-link" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssm/mybatis/" class="nav-link" aria-label="Mybatis"><!--[--><!--]--> Mybatis <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssm/integration/" class="nav-link" aria-label="SSM整合"><!--[--><!--]--> SSM整合 <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>高级部分</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/ssm/ssm-senior/spring/" class="nav-link" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/ssm/ssm-senior/springmvc/" class="nav-link" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/springboot/" class="nav-link" aria-label="SpringBoot"><!--[--><!--]--> SpringBoot <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/springsecurity2/" class="nav-link" aria-label="SpringSecirity"><!--[--><!--]--> SpringSecirity <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/Front-end/es6/" class="nav-link" aria-label="ES6新特性"><!--[--><!--]--> ES6新特性 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/Front-end/vue/" class="nav-link" aria-label="VueJS"><!--[--><!--]--> VueJS <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="常用文档"><span class="title">常用文档</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="常用文档"><span class="title">常用文档</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://element.eleme.cn/#/zh-CN/component/table" rel="noopener noreferrer" target="_blank" aria-label="elementUI"><!--[--><!--]--> elementUI <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://cn.vuejs.org/v2/guide/" rel="noopener noreferrer" target="_blank" aria-label="Vue文档"><!--[--><!--]--> Vue文档 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="http://momentjs.cn/docs/" rel="noopener noreferrer" target="_blank" aria-label="momentjs"><!--[--><!--]--> momentjs <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="http://easypoi.mydoc.io/" rel="noopener noreferrer" target="_blank" aria-label="EasyPoi文档"><!--[--><!--]--> EasyPoi文档 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发工具类"><span class="title">开发工具类</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发工具类"><span class="title">开发工具类</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/utils/stringutils/" class="nav-link" aria-label="StringUtils"><!--[--><!--]--> StringUtils <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Redis</p><ul class=""><li><!--[--><a href="/database/redis/" class="nav-link router-link-active sidebar-item" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/install.html" class="nav-link sidebar-item" aria-label="redis6安装"><!--[--><!--]--> redis6安装 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/key.html" class="nav-link sidebar-item" aria-label="redis键(key)常用命令"><!--[--><!--]--> redis键(key)常用命令 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/string.html" class="nav-link sidebar-item" aria-label="string（字符串）"><!--[--><!--]--> string（字符串） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/list.html" class="nav-link sidebar-item" aria-label="list(列表)"><!--[--><!--]--> list(列表) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/set.html" class="nav-link sidebar-item" aria-label="Set"><!--[--><!--]--> Set <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/hash.html" class="nav-link sidebar-item" aria-label="哈希(Hash)"><!--[--><!--]--> 哈希(Hash) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/zset.html" class="nav-link sidebar-item" aria-label="Zset(sorted set)"><!--[--><!--]--> Zset(sorted set) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/configuration.html" class="nav-link sidebar-item" aria-label="配置文件介绍"><!--[--><!--]--> 配置文件介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/rdb.html" class="nav-link sidebar-item" aria-label="Redis持久化之-RDB"><!--[--><!--]--> Redis持久化之-RDB <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/aof.html" class="nav-link sidebar-item" aria-label="Redis持久化之-AOF"><!--[--><!--]--> Redis持久化之-AOF <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/masterSlave.html" class="nav-link sidebar-item" aria-label="Redis主从复制"><!--[--><!--]--> Redis主从复制 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/sentinel.html" class="nav-link sidebar-item" aria-label="Redis哨兵模式(Sentinel)"><!--[--><!--]--> Redis哨兵模式(Sentinel) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/springbootredis.html" class="nav-link sidebar-item" aria-label="SpringBoot + Redis 实现缓存"><!--[--><!--]--> SpringBoot + Redis 实现缓存 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/distributedLock.html" class="nav-link sidebar-item" aria-label="redis实现分布式锁"><!--[--><!--]--> redis实现分布式锁 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/bit.html" class="nav-link sidebar-item" aria-label="Bit位图"><!--[--><!--]--> Bit位图 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/hyperLogLog.html" class="nav-link sidebar-item" aria-label="HyperLogLog"><!--[--><!--]--> HyperLogLog <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/bloomFilter.html" class="nav-link sidebar-item" aria-label="布隆过滤器"><!--[--><!--]--> 布隆过滤器 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/database/redis/redisCurrentlimiting.html" class="nav-link sidebar-item" aria-label="Redis 限流"><!--[--><!--]--> Redis 限流 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page" data-v-3a25be96><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="geohash" tabindex="-1"><a class="header-anchor" href="#geohash" aria-hidden="true">#</a> GeoHash</h1><h2 id="geohash-算法介绍" tabindex="-1"><a class="header-anchor" href="#geohash-算法介绍" aria-hidden="true">#</a> GeoHash 算法介绍</h2><p>GeoHash是一种地址编码方法。他能够把二维的空间经纬度数据编码成一个字符串。</p><p>我们知道，经度范围是东经180到西经180，纬度范围是南纬90到北纬90，我们设定西经为负，南纬为负，所以地球上的经度范围就是<code>[-180， 180]</code>，纬度范围就是<code>[-90，90]</code>。如果以本初子午线、赤道为界，地球可以分成4个部分。</p><p>如果纬度范围[-90°, 0°)用二进制0代表，（0°, 90°]用二进制1代表，经度范围[-180°, 0°)用二进制0代表，（0°, 180°]用二进制1代表，那么地球可以分成如下4个部分：</p><p><img src="https://img.zxqs.top/20230214150759.png" alt="image-20230214150750839"></p><p>如果在小块范围内递归对半划分呢？</p><p><img src="https://img.zxqs.top/20230214150825.png" alt="image-20230214150824502"></p><p>可以看到，划分的区域更多了，也更精确了。geohash算法就是基于这种思想，划分的次数更多，区域更多，区域面积更小了。通过将经纬度编码，给地理位置分区</p><h2 id="算法过程" tabindex="-1"><a class="header-anchor" href="#算法过程" aria-hidden="true">#</a> 算法过程</h2><p><strong>第一步：将经纬度转换为二进制</strong></p><p>以经纬度值：（116.389550， 39.928167）进行算法说明，对纬度39.928167进行逼近编码 (地球纬度区间是[-90,90]）</p><ol><li>区间[-90,90]进行二分为[-90,0),[0,90]，称为左右区间，可以确定39.928167属于右区间[0,90]，给标记为1</li><li>接着将区间[0,90]进行二分为 [0,45),[45,90]，可以确定39.928167属于左区间 [0,45)，给标记为0</li><li>递归上述过程39.928167总是属于某个区间[a,b]。随着每次迭代区间[a,b]总在缩小，并越来越逼近39.928167</li><li>如果给定的纬度x（39.928167）属于左区间，则记录0，如果属于右区间则记录1，序列的长度跟给定的区间划分次数有关，如下图;</li></ol><p><img src="https://img.zxqs.top/20230214151722.png" alt="image-20230214151721436"></p><p>通过上述计算，纬度产生的编码为<code>1 0 1 1 1 0 0 0 1 1 0 0 0 1 1</code></p><p>同理，地球经度区间是[-180,180]，可以对经度116.389550进行编码，经度产生的编码为 <code>1 1 0 1 0 0 1 0 1 1 0 0 0 1 0</code></p><p><strong>第二步：将经纬度的二进制编码合并</strong></p><p><strong>从偶数 0 开始，经度占偶数位，纬度占奇数位。</strong></p><table><thead><tr><th>序号</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th><th>29</th></tr></thead><tbody><tr><td><strong>编码</strong></td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr></tbody></table><p><strong>第三步：将合并后的二进制数做Base32编码</strong></p><p>按照每5位一组，分成6组，每组计算其对应的十进制数值，按照Base32进行编码。</p><p>Base32编码表的其中一种如下，是用0-9、b-z（去掉a, i, l, o）这32个字母进行编码.</p><p><img src="https://img-blog.csdnimg.cn/img_convert/d401276fb5b3448e02aedade4ec6491e.png" alt="image-20230214151721434"></p><div class="language-text ext-text"><pre class="language-text"><code>11100  11101  00100  01111  00000  01101
28(w)  29(x)   4(4)   15(g)  0(0)   13(e)
</code></pre></div><p>最终得到的经纬度编码为：wx4g0e</p><h2 id="geohash算法的特点" tabindex="-1"><a class="header-anchor" href="#geohash算法的特点" aria-hidden="true">#</a> GeoHash算法的特点</h2><ol><li>Geohash比直接用经纬度的高效很多，而且使用者可以发布地址编码，既能表明自己的位置，又不至于暴露自己的精确坐标，有助于隐私保护。</li><li>GeoHash表示的并不是一个点，而是一个矩形区域。</li><li>GeoHash编码的前缀可以表示更大的区域。例如wx4g0ec1，它的前缀wx4g0e表示包含编码wx4g0ec1在内的更大范围。 这个特性可以用于附近地点搜索。</li><li>编码越长，表示的范围越小，位置也越精确。因此我们就可以通过比较GeoHash匹配的位数来判断两个点之间的大概距离。下表编码长度的误差：</li></ol><p><img src="https://img-blog.csdnimg.cn/20210719154223831.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L29raXdpbGxkb2l0,size_16,color_FFFFFF,t_70" alt="image-20230214151721434dfsdf"></p><h2 id="redis-中使用geohash算法" tabindex="-1"><a class="header-anchor" href="#redis-中使用geohash算法" aria-hidden="true">#</a> Redis 中使用GeoHash算法</h2><p>redis的Geo指令共7个。</p><h3 id="geoadd" tabindex="-1"><a class="header-anchor" href="#geoadd" aria-hidden="true">#</a> geoadd</h3><div class="language-text ext-text"><pre class="language-text"><code>geoadd key [NX|XX] [CH] longitude latitude member [longitude latitude member...]
</code></pre></div><p><code>[NX|XX] [CH]</code>: 可选参数</p><p>longitude latitude：经度和纬度</p><p>member：名称</p><p>可以写多个 <code>经度 纬度 名称</code></p><p>geoadd指令携带集合名称以及多个经纬度名称三元组，注意可以是多个三元组，如下指令:</p><div class="language-text ext-text"><pre class="language-text"><code>geoadd k1 117.13936 36.68104 qlrjy
geoadd k1 117.14336 36.68286 mlgc
geoadd k1 117.19229 36.68655 sdjzdx 117.20229 36.70218 zxjxtd
</code></pre></div><p>Geo存储结构使用的是zset，我们可以使用zset相关的指令来操作Geo数据。例如，元素的删除可以使用zrem命令。</p><h3 id="geodist" tabindex="-1"><a class="header-anchor" href="#geodist" aria-hidden="true">#</a> geodist</h3><div class="language-text ext-text"><pre class="language-text"><code>geodist key member1 member2 [m|km|ft|mi]
</code></pre></div><p>geodist 命令用来计算两个元素之间的距离，参数为：<code>key名称 元素名称 距离单位</code>，距离单位分为 <code>米/公里/英尺/英里</code> 默认是 米。</p><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; geodist k1 qlrjy mlgc
&quot;410.3637&quot;
</code></pre></div><h3 id="geopos-获取元素位置" tabindex="-1"><a class="header-anchor" href="#geopos-获取元素位置" aria-hidden="true">#</a> geopos 获取元素位置</h3><p>geopos命令可以获取key中任意元素的经纬度坐标。</p><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; geopos k1 qlrjy sdjzdx
1) 1) &quot;117.13936060667037964&quot;
   2) &quot;36.68104109425305381&quot;
2) 1) &quot;117.19229131937026978&quot;
   2) &quot;36.68654904333229894&quot;
127.0.0.1:6379&gt;

</code></pre></div><h3 id="geohash-1" tabindex="-1"><a class="header-anchor" href="#geohash-1" aria-hidden="true">#</a> geohash</h3><p>GeoHash可以获取元素的经纬度编码字符串，它是base32编码。</p><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; geohash k1 mlgc zxjxtd
1) &quot;wwe29tvjnh0&quot;
2) &quot;wwe2g12jeq0&quot;

</code></pre></div><p>可以用这个编码值在网站：http://geohash.org/hash值 直接进行定位。</p><p><strong>注意：</strong></p><p>如果用上面的网站去进行定位，要确保你保存在redis的经纬度是根据 <code>WGS84坐标系</code>的地图，从百度或高德获取的经纬度，在此网站定位是有偏差的的。</p><p>这是因为谷歌使用的是 <code>WGS84坐标系</code>，高德和百度分别使用的是 <code>GCJ-02(火星)坐标系</code> 和 <code>BD09坐标系</code></p><h3 id="georadiusbymember" tabindex="-1"><a class="header-anchor" href="#georadiusbymember" aria-hidden="true">#</a> georadiusbymember</h3><div class="language-text ext-text"><pre class="language-text"><code>georadiusbymember key member radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count [ANY]] [ASC|DESC]
</code></pre></div><p>这个指令用来查询指定元素附近的其他元素。</p><div class="language-text ext-text"><pre class="language-text"><code>// 获取 6km 范围内的其他元素，最多三个（包括自己），按照距离顺序排序
127.0.0.1:6379&gt; georadiusbymember k1 qlrjy 6 km count 3 asc
1) &quot;qlrjy&quot;
2) &quot;mlgc&quot;
3) &quot;tyxy&quot;

</code></pre></div><p>WITHCOORD 携带坐标，WITHDIST 携带距离，WITHHASH 携带 hash</p><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; georadiusbymember k1 qlrjy 5 km count 3 asc withcoord
1) 1) &quot;qlrjy&quot;
   2) 1) &quot;117.13263362646102905&quot;
      2) &quot;36.67478793715296348&quot;
2) 1) &quot;mlgc&quot;
   2) 1) &quot;117.13681250810623169&quot;
      2) &quot;36.67613894353089421&quot;
127.0.0.1:6379&gt; georadiusbymember k1 qlrjy 6 km count 3 asc withcoord
1) 1) &quot;qlrjy&quot;
   2) 1) &quot;117.13263362646102905&quot;
      2) &quot;36.67478793715296348&quot;
2) 1) &quot;mlgc&quot;
   2) 1) &quot;117.13681250810623169&quot;
      2) &quot;36.67613894353089421&quot;
3) 1) &quot;tyxy&quot;
   2) 1) &quot;117.19615906476974487&quot;
      2) &quot;36.68414105823092797&quot;

</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; georadiusbymember k1 qlrjy 6 km count 3 asc withdist
1) 1) &quot;qlrjy&quot;
   2) &quot;0.0000&quot;
2) 1) &quot;mlgc&quot;
   2) &quot;0.4019&quot;
3) 1) &quot;tyxy&quot;
   2) &quot;5.7613&quot;
127.0.0.1:6379&gt;
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; georadiusbymember k1 qlrjy 6 km count 3 asc withhash
1) 1) &quot;qlrjy&quot;
   2) (integer) 4065935358376967
2) 1) &quot;mlgc&quot;
   2) (integer) 4065935384198624
3) 1) &quot;tyxy&quot;
   2) (integer) 4065935809566811

</code></pre></div><h3 id="georadius" tabindex="-1"><a class="header-anchor" href="#georadius" aria-hidden="true">#</a> georadius</h3><p>根据坐标值查询附近元素</p><div class="language-text ext-text"><pre class="language-text"><code>georadius key longitude latitude radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count [ANY]] [ASC|DESC] [STORE key] [STOREDIST key]
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>127.0.0.1:6379&gt; georadius k1 117.13263362646102905 36.67478793715296348 6 km count 3 desc withhash
1) 1) &quot;tyxy&quot;
   2) (integer) 4065935809566811
2) 1) &quot;mlgc&quot;
   2) (integer) 4065935384198624
3) 1) &quot;qlrjy&quot;
   2) (integer) 4065935358376967
</code></pre></div><h2 id="springboot-中使用" tabindex="-1"><a class="header-anchor" href="#springboot-中使用" aria-hidden="true">#</a> springboot 中使用</h2><p><strong>添加信息：</strong></p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addGeo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Point</span><span class="token punctuation">&gt;</span></span> pointMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pointMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;jining&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">116.576795</span><span class="token punctuation">,</span><span class="token number">35.355297</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pointMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;jinan&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">117.132454</span><span class="token punctuation">,</span><span class="token number">36.674582</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pointMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;tengzhou&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">117.240922</span><span class="token punctuation">,</span><span class="token number">34.989832</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">final</span> <span class="token class-name">Long</span> city <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundGeoOps</span><span class="token punctuation">(</span>GEO_STAGE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pointMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>boundGeoOps()</code> 的参数是保存的 <code>key</code>。</p><p><strong>根据位置名称查询坐标信息：</strong></p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getGeo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Point</span><span class="token punctuation">&gt;</span></span> position <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundGeoOps</span><span class="token punctuation">(</span>GEO_STAGE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token string">&quot;jining&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jinan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tengzhou&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Point</span> point <span class="token operator">:</span> position<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><strong>计算两点间距离：</strong></p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 计算两点之间的距离，单位-KM，没写就默认-M</span>
   <span class="token class-name">Distance</span> distance <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundGeoOps</span><span class="token punctuation">(</span>GEO_STAGE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span><span class="token string">&quot;jining&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jinan&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Metrics</span><span class="token punctuation">.</span>KILOMETERS<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   <span class="token comment">// 距离</span>
   <span class="token keyword">double</span> value <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 单位</span>
   <span class="token class-name">String</span> unit <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">getUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;两地之间的距离：&quot;</span><span class="token operator">+</span>value<span class="token operator">+</span>unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>根据坐标查询附近位置</strong></p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getRadius</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 指定经纬度</span>
   <span class="token class-name">Point</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">117.132454</span><span class="token punctuation">,</span> <span class="token number">36.674582</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 指定距离和单位</span>
   <span class="token class-name">Distance</span> distance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Distance</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token class-name">Metrics</span><span class="token punctuation">.</span>KILOMETERS<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">Circle</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span>distance<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// 配置返回信息</span>
   <span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoRadiusCommandArgs</span> args <span class="token operator">=</span> <span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoRadiusCommandArgs</span><span class="token punctuation">.</span><span class="token function">newGeoRadiusArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   args<span class="token punctuation">.</span><span class="token function">sortAscending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment">// 升序排序</span>
            <span class="token comment">//.sortDescending()  // 降序排序</span>
            <span class="token punctuation">.</span><span class="token function">includeCoordinates</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//包含坐标信息</span>
            <span class="token punctuation">.</span><span class="token function">includeDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 包含距离信息</span>
            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 显示返回数量</span>

   <span class="token class-name">GeoResults</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoLocation</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> radius <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundGeoOps</span><span class="token punctuation">(</span>GEO_STAGE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">radius</span><span class="token punctuation">(</span>circle<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">GeoResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoLocation</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">:</span> radius<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 返回网点信息</span>
      <span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoLocation</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> location <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 网点名</span>
      <span class="token class-name">String</span> name <span class="token operator">=</span> location<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 网点坐标</span>
      <span class="token class-name">Point</span> point1 <span class="token operator">=</span> location<span class="token punctuation">.</span><span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 返回距离</span>
      <span class="token class-name">Distance</span> dis <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 距离</span>
      <span class="token keyword">double</span> value <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 单位</span>
      <span class="token class-name">String</span> unit <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">getUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 输出</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;网点名：&quot;</span><span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;x坐标&quot;</span><span class="token operator">+</span>point1<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;y坐标&quot;</span> <span class="token operator">+</span> point1<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;距离：&quot;</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">&quot;单位：&quot;</span> <span class="token operator">+</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>根据名称查询附近位置</strong></p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getRadius2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

   <span class="token comment">// 指定距离和单位</span>
   <span class="token class-name">Distance</span> distance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Distance</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token class-name">Metrics</span><span class="token punctuation">.</span>KILOMETERS<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// 配置返回信息</span>
   <span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoRadiusCommandArgs</span> args <span class="token operator">=</span> <span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoRadiusCommandArgs</span><span class="token punctuation">.</span><span class="token function">newGeoRadiusArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   args<span class="token punctuation">.</span><span class="token function">sortAscending</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment">// 升序排序</span>
            <span class="token comment">//.sortDescending()  // 降序排序</span>
            <span class="token punctuation">.</span><span class="token function">includeCoordinates</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//包含坐标信息</span>
            <span class="token punctuation">.</span><span class="token function">includeDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 包含距离信息</span>
            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 显示返回数量</span>

   <span class="token class-name">GeoResults</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoLocation</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> radius <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundGeoOps</span><span class="token punctuation">(</span>GEO_STAGE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">radius</span><span class="token punctuation">(</span><span class="token string">&quot;jinan&quot;</span><span class="token punctuation">,</span>distance<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">GeoResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoLocation</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">:</span> radius<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 返回网点信息</span>
      <span class="token class-name">RedisGeoCommands<span class="token punctuation">.</span>GeoLocation</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> location <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 网点名</span>
      <span class="token class-name">String</span> name <span class="token operator">=</span> location<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 网点坐标</span>
      <span class="token class-name">Point</span> point1 <span class="token operator">=</span> location<span class="token punctuation">.</span><span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 返回距离</span>
      <span class="token class-name">Distance</span> dis <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 距离</span>
      <span class="token keyword">double</span> value <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 单位</span>
      <span class="token class-name">String</span> unit <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">getUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 输出</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;网点名：&quot;</span><span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;x坐标&quot;</span><span class="token operator">+</span>point1<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;y坐标&quot;</span> <span class="token operator">+</span> point1<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;距离：&quot;</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">&quot;单位：&quot;</span> <span class="token operator">+</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>特别注意：</strong></p><p>这里的位置名称一定要存在，如果位置名称不存在就会报异常。<code>org.springframework.data.redis.RedisSystemException: Error in execution; nested exception is io.lettuce.core.RedisCommandExecutionException: ERR could not decode requested zset member</code></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/ysmc-slg/ysmcBlog/edit/master/docs/database/redis/geoHash.md" rel="noopener noreferrer" target="_blank" aria-label="编辑文档！"><!--[--><!--]--> 编辑文档！ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><span class="meta-item-info">2023/2/15 22:07:20</span></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 494786209@qq.com">ysmc</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.0db19ca3.js" defer></script>
  </body>
</html>
